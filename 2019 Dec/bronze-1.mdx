http://www.usaco.org/index.php?page=viewproblem2&cpid=963

```cpp
#include <bits/stdc++.h>
#define ll long long
using namespace std;

int main() {
    freopen("gymnastics.in", "r", stdin);
    freopen("gymnastics.out", "w", stdout);
    
    ios::sync_with_stdio(0);
    cin.tie(0);
    
    ll k, n, s=0;
    cin >> k >> n;
    
    map<pair<ll,ll>, ll> m;
    for (ll i=0; i<k; i++) {
        ll A[30];
        cin >> A[0];
        for (ll i=1; i<n; i++) {
            cin >> A[i];
        }
        map<pair<ll,ll>, ll> M;
        for (ll i=0; i<n; i++) {
            for (ll j=0; j<i; j++) {
                M[{A[j], A[i]}]++;
            }
        }
        
        for (auto x:M){
            m[x.first]++;
            //cout << m[x.first] << '\n';
        }
    }
    
    for (auto x:m){
        //cout << x.second << " " << k << "\n";
        if (x.second==k) s++;
    }
    
    cout << s;
    
    return 0;
}
```
